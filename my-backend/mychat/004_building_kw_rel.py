import os
import sys
import django

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(BASE_DIR)
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")
django.setup()

from mychat.models import CampusBuildingKeywordRelation

"""
Building Sequence: G N S L A H T J M I R
Building index   : 1 2 3 4 5 6 7 8 9 A B
"""

# -------------------------------
# mychat/004_building_kw_rel.py
# -------------------------------
print("\n" + "-" * 40)
print("# mychat/004_building_kw_rel.py")
print("-" * 40 + "\n")

building_keywords = {
    # 제1공학관 (G관)
    1: [
        "제1공학관", "공학관", "G관", "공대", "공과대", "공과대학",
        "융합공과대학",                #추가
        "학생입학처",                  #추가
        "공용 학습 라운지",            #추가
        "팀 프로젝트 라운지",           #추가
        "공학과사무실",                    #추가
        "징검다리",                    #추가
        "N관 연결",                    #추가
        "강의실",                      #추가
        "연구실",                      #추가
        "후문 자판기",                  #추가
        "정문 안내 표지판"              #추가
    ],

    # 인문사회과학대학관 (N관)
    2: [
        "인문사회과학대학관", "자하관", "N관", "인사대",
        "구름다리", "스터디룸",
        "라운지",                       #추가
        "휴게공간",                     #추가
        "자유전공학부지원센터",          #추가
        "N101",                        #추가
        "주차장"                        #추가
    ],

    # 중앙교수회관 (S관)
    3: [
        "중앙교수회관", "교수회관", "S관", "편의점",
        "소강당", "KB STAR 카페", "교수연구실", "정류장", "버스정류장", 
        "카페드림",                   #추가
        "스터디룸",                   #추가
        "SB 대형강의실",              #추가
        "부스활동"                    #추가
    ],

    # 학술정보관 (L관)
    4: [
        "학술정보관", "학정관", "L관", "도서관",
        "리딩라운지", "리라", "공부", "열람실", "정보실", "책", "에스컬레이터", "프린터기", "스터디룸",
        "자료실",                     #추가
        "그룹 스터디룸",              #추가
        "자하마루",                   #추가
        "옥상 정원",                  #추가
        "경영경제대학관 연결",         #추가
        "에스컬레이터 통로",           #추가
        "유료 프린터기",               #추가
        "B1 프린터기",                #추가
        "계단 옆 프린터기"             #추가
    ],

    # 사범대학관 (A관)
    5: [
        "사범대학관", "사범관", "A관", "사범대",
        "교직", "교육과", "교사", "교육", "혁신융합파크", "스터디룸",
        "편의점",
        "자유공부공간",               #추가
        "교직지원센터",               #추가
        "R관 연결",                  #추가
        "후문",                      #추가
        "야외 계단"                   #추가
    ],

    # 학생회관 (H관)
    6: [
        "학생회관", "회관", "H관", "학생회",
        "동아리방", "동방", "ATM기", "ATM", "atm기", "atm", "무료 보조배터리", "현금", "인출기", "학생 자치", "휴게 공간",
        "라운지",                    #추가
        "기념품점",                  #추가
        "배달음식 공간",              #추가
        "무인 카페",                  #추가
        "취업진로지원센터",            #추가
        "보건건강관리센터",            #추가
        "여학생 휴게실",              #추가
        "동아리실",                  #추가
        "사슴상",                    #추가
        "야외 무대"                   #추가
    ],

    # 경영경제대학관 (T관)
    7: [
        "경영경제대학관", "밀레니엄관", "T관", "경경대",
        "휴식 공간", "계단형 강의실", "에스컬레이터", "스터디룸",
        "CLP",                       #추가
        "시청각실",                  #추가
        "명사 강연",                 #추가
        "학술정보관 연결",            #추가
        "1층 휴식공간",               #추가
        "5층 휴식공간"                #추가
    ],

    # 대학본부 (J관)
    8: [
        "대학본부", "총장실", "대학본부", "행정실",
        "대학원 과사무실",
        "커뮤니케이션팀",             #추가
        "국제관계센터",               #추가
        "국제학생지원팀",             #추가
        "총무인사팀",                 #추가
        "재무회계팀",                 #추가
        "대외교류협력팀",             #추가
        "계당교양교육원교학팀",       #추가
        "의사소통능력개발센터",       #추가
        "기초교육센터",               #추가
        "학사운영팀",                 #추가
        "기획예산팀",                 #추가
        "전략평가팀",                 #추가
        "홍보팀",                     #추가
        "교원인사팀",                 #추가
        "대학원교학팀",               #추가
        "법무실"                      #추가
    ],

    # 월해관 (M관)
    9: [
        "월해관", "예술관", "M관", "문예대", "종합관",
        "음악대학",                    #추가
        "문화예술대학",                #추가
        "평생교육원",                  #추가
        "무용예술학과",                #추가
        "의류학과",                    #추가
        "운동장",                      #추가
        "상명챔피언스리그",             #추가
        "윗동네",                      #추가
        "무용연습실",                  #추가
        "동그란 복도",                  #추가
        "제2교수회관 연결",             #추가
        "상명아트센터"                  #추가
    ],

    # 제2교수회관 (I관)
    10: [
        "제2교수회관", "교수연구관", "I관", "제2교수연구동",
        "교수연구실",                    #추가
        "애니이츠",                      #추가
        "애니이츠월드",                  #추가
        "ATM기", "ATM", "atm기", "atm", #추가
        "현금 인출기",                   #추가
        "주차장 연결"                    #추가
    ],

    # 미래백년관 (R관)
    11: [
        "미래백년관", "미백관", "R관",
        "학생식당", "블루포트 카페", "갤러리 월해", 
        "ATM기", "ATM", "atm기", "atm",
        "주차장",                     #추가
        "샤워실",                     #추가
        "박물관 기획전시실",           #추가
        "밀레홀",                     #추가
        "오름교육 라운지",             #추가
        "교육미디어혁신센터",           #추가
        "산학연구관리팀",               #추가
        "산학협력지원팀",               #추가
        "대학교육혁신원",               #추가
        "교수학습개발센터",             #추가
        "비교과통합지원센터",           #추가
        "SW중심대학사업단",             #추가
        "캠퍼스타운사업단",             #추가
        "국민은행 ATM",                #추가
        "우리은행 ATM",                #추가
    ]
}

# ✅ 기존 Building_Keywords 데이터 모두 삭제
deleted_count = CampusBuildingKeywordRelation.objects.count()
CampusBuildingKeywordRelation.objects.all().delete()
print(f"✅ 기존 CampusBuildingKeywordRelation {deleted_count}개 삭제 완료")

# ✅ 새 데이터 무조건 생성
created_count = 0
building_created_map = {}  # 건물별 등록 개수 저장

for building_id, keywords in building_keywords.items():
    for keyword in keywords:
        CampusBuildingKeywordRelation.objects.create(
            keyword=keyword,
            building_id=building_id
        )
        created_count += 1
        building_created_map[building_id] = building_created_map.get(building_id, 0) + 1

# ✅ 요약 출력
print("\n📊 건물별 등록 결과")
for b_id, count in building_created_map.items():
    print(f" - Building {b_id}: {count} 개 등록")

print(f"\n📊 총 CampusBuildingKeywordRelation 등록 개수: {created_count}")